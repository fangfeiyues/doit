springmvc(容器初始化) / spring初始化 / spring aware / spring事务 / spring aop

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-servlet.xml</param-value> // 默认
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
配置一个以Spring ContextLoaderListener容器为父容器的Spring WebApplicationContext容器(可以有多个)

Servlet容器的关系？
HttpServletBean: 负责将 ServletConfig 集成到 Spring 中
FrameworkServlet: 负责初始化 Spring Servlet WebApplicationContext 容器
DispatcherServlet：onRefresh(ApplicationContext context)初始化九个组件
1.MultipartResolver*  文件上传
2.LocaleResolver  本地国际化
3.ThemeResolver  主题解析
4.HandlerMapping*  处理器匹配接口，根据请求( handler )获得其的处理器( handler )和拦截器们( HandlerInterceptor 数组 )
5.HandlerAdapter*  处理器适配器接口 执行ModelAndView handle(HttpServletRequest, HttpServletResponse, Object handler)方法
6.HandlerExceptionResolver  处理器异常解析器接口
7.RequestToViewNameTranslator
8.ViewResolver*  实体解析器接口，根据视图名和国际化，获得最终的视图 View 对象
9.FlashMapManager

doGet()/doPost()
FrameworkServlet#processRequest(HttpServletRequest, HttpServletResponse).doService(request, response)
    doDispatch(request, response)  执行请求分发
        -processedRequest = checkMultipart(request);  是否上传请求
        -1.HandlerExecutionChain mappedHandler = getHandler(processedRequest)   返回的HandlerExecutionChain= handler&HandlerInterceptors
        -2.HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler())    获取HandlerAdapter
        -3.mappedHandler.applyPreHandle(processedRequest, response)             HandlerExecutionChain执行拦截器前置方法
        -4.mv = ha.handle(processedRequest, response, mappedHandler.getHandler())  处理handler()
        -5.mappedHandler.applyPostHandle(processedRequest, response, mv)        HandlerExecutionChain执行拦截器后置置方法
        -6.processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException)  处理执行结果






















